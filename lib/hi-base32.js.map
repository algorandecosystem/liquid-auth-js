{"version":3,"file":"hi-base32.js","sources":["../src/hi-base32.ts"],"sourcesContent":["/*\n * [hi-base32]{@link https://github.com/emn178/hi-base32}\n *\n * @version 0.5.1\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2015-2021\n * @license MIT\n */\nconst BASE32_ENCODE_CHAR = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567'.split('');\nconst BASE32_DECODE_CHAR: Record<string, number> = {\n  A: 0,\n  B: 1,\n  C: 2,\n  D: 3,\n  E: 4,\n  F: 5,\n  G: 6,\n  H: 7,\n  I: 8,\n  J: 9,\n  K: 10,\n  L: 11,\n  M: 12,\n  N: 13,\n  O: 14,\n  P: 15,\n  Q: 16,\n  R: 17,\n  S: 18,\n  T: 19,\n  U: 20,\n  V: 21,\n  W: 22,\n  X: 23,\n  Y: 24,\n  Z: 25,\n  2: 26,\n  3: 27,\n  4: 28,\n  5: 29,\n  6: 30,\n  7: 31,\n};\n\nexport const decodeAsBytes = function (base32Str: string): number[] {\n  if (base32Str === '') {\n    return [];\n  } else if (!/^[A-Z2-7=]+$/.test(base32Str)) {\n    throw new Error('Invalid base32 characters');\n  }\n  base32Str = base32Str.replace(/=/g, '');\n  let v1;\n  let v2;\n  let v3;\n  let v4;\n  let v5;\n  let v6;\n  let v7;\n  let v8;\n  const bytes: number[] = [];\n  let index = 0;\n  const length = base32Str.length;\n\n  // 4 char to 3 bytes\n  for (var i = 0, count = (length >> 3) << 3; i < count; ) {\n    v1 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    v2 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    v3 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    v4 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    v5 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    v6 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    v7 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    v8 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    bytes[index++] = ((v1 << 3) | (v2 >>> 2)) & 255;\n    bytes[index++] = ((v2 << 6) | (v3 << 1) | (v4 >>> 4)) & 255;\n    bytes[index++] = ((v4 << 4) | (v5 >>> 1)) & 255;\n    bytes[index++] = ((v5 << 7) | (v6 << 2) | (v7 >>> 3)) & 255;\n    bytes[index++] = ((v7 << 5) | v8) & 255;\n  }\n\n  // remain bytes\n  const remain = length - count;\n  if (remain === 2) {\n    v1 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    v2 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    bytes[index++] = ((v1 << 3) | (v2 >>> 2)) & 255;\n  } else if (remain === 4) {\n    v1 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    v2 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    v3 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    v4 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    bytes[index++] = ((v1 << 3) | (v2 >>> 2)) & 255;\n    bytes[index++] = ((v2 << 6) | (v3 << 1) | (v4 >>> 4)) & 255;\n  } else if (remain === 5) {\n    v1 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    v2 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    v3 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    v4 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    v5 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    bytes[index++] = ((v1 << 3) | (v2 >>> 2)) & 255;\n    bytes[index++] = ((v2 << 6) | (v3 << 1) | (v4 >>> 4)) & 255;\n    bytes[index++] = ((v4 << 4) | (v5 >>> 1)) & 255;\n  } else if (remain === 7) {\n    v1 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    v2 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    v3 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    v4 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    v5 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    v6 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    v7 = BASE32_DECODE_CHAR[base32Str.charAt(i++)];\n    bytes[index++] = ((v1 << 3) | (v2 >>> 2)) & 255;\n    bytes[index++] = ((v2 << 6) | (v3 << 1) | (v4 >>> 4)) & 255;\n    bytes[index++] = ((v4 << 4) | (v5 >>> 1)) & 255;\n    bytes[index++] = ((v5 << 7) | (v6 << 2) | (v7 >>> 3)) & 255;\n  }\n  return bytes;\n};\n\nexport const encodeBytes = function (bytes: Uint8Array) {\n  let v1;\n  let v2;\n  let v3;\n  let v4;\n  let v5;\n  let base32Str = '';\n  const length = bytes.length;\n  for (\n    var i = 0, count = parseInt((length / 5) as unknown as string) * 5;\n    i < count;\n\n  ) {\n    v1 = bytes[i++];\n    v2 = bytes[i++];\n    v3 = bytes[i++];\n    v4 = bytes[i++];\n    v5 = bytes[i++];\n    base32Str +=\n      BASE32_ENCODE_CHAR[v1 >>> 3] +\n      BASE32_ENCODE_CHAR[((v1 << 2) | (v2 >>> 6)) & 31] +\n      BASE32_ENCODE_CHAR[(v2 >>> 1) & 31] +\n      BASE32_ENCODE_CHAR[((v2 << 4) | (v3 >>> 4)) & 31] +\n      BASE32_ENCODE_CHAR[((v3 << 1) | (v4 >>> 7)) & 31] +\n      BASE32_ENCODE_CHAR[(v4 >>> 2) & 31] +\n      BASE32_ENCODE_CHAR[((v4 << 3) | (v5 >>> 5)) & 31] +\n      BASE32_ENCODE_CHAR[v5 & 31];\n  }\n\n  // remain char\n  const remain = length - count;\n  if (remain === 1) {\n    v1 = bytes[i];\n    base32Str +=\n      BASE32_ENCODE_CHAR[v1 >>> 3] +\n      BASE32_ENCODE_CHAR[(v1 << 2) & 31] +\n      '======';\n  } else if (remain === 2) {\n    v1 = bytes[i++];\n    v2 = bytes[i];\n    base32Str +=\n      BASE32_ENCODE_CHAR[v1 >>> 3] +\n      BASE32_ENCODE_CHAR[((v1 << 2) | (v2 >>> 6)) & 31] +\n      BASE32_ENCODE_CHAR[(v2 >>> 1) & 31] +\n      BASE32_ENCODE_CHAR[(v2 << 4) & 31] +\n      '====';\n  } else if (remain === 3) {\n    v1 = bytes[i++];\n    v2 = bytes[i++];\n    v3 = bytes[i];\n    base32Str +=\n      BASE32_ENCODE_CHAR[v1 >>> 3] +\n      BASE32_ENCODE_CHAR[((v1 << 2) | (v2 >>> 6)) & 31] +\n      BASE32_ENCODE_CHAR[(v2 >>> 1) & 31] +\n      BASE32_ENCODE_CHAR[((v2 << 4) | (v3 >>> 4)) & 31] +\n      BASE32_ENCODE_CHAR[(v3 << 1) & 31] +\n      '===';\n  } else if (remain === 4) {\n    v1 = bytes[i++];\n    v2 = bytes[i++];\n    v3 = bytes[i++];\n    v4 = bytes[i];\n    base32Str +=\n      BASE32_ENCODE_CHAR[v1 >>> 3] +\n      BASE32_ENCODE_CHAR[((v1 << 2) | (v2 >>> 6)) & 31] +\n      BASE32_ENCODE_CHAR[(v2 >>> 1) & 31] +\n      BASE32_ENCODE_CHAR[((v2 << 4) | (v3 >>> 4)) & 31] +\n      BASE32_ENCODE_CHAR[((v3 << 1) | (v4 >>> 7)) & 31] +\n      BASE32_ENCODE_CHAR[(v4 >>> 2) & 31] +\n      BASE32_ENCODE_CHAR[(v4 << 3) & 31] +\n      '=';\n  }\n  return base32Str;\n};\n"],"names":[],"mappings":"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"}